<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hacker News</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            padding: 10px;
            border: 1px solid #ddd;
        }
        th {
            background-color: #f2f2f2;
        }
        .link {
            color: #007BFF;
            text-decoration: none;
        }
        .link:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <h1>Hacker News</h1>
    <table id="storiesTable">
        <thead>
            <tr>
                <th>ID</th>
                <th>Title</th>
                <th>URL</th>
                <th>Text</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <script>
        const showStoriesUrl = 'https://hacker-news.firebaseio.com/v0/showstories.json';

        async function fetchShowStories() {
            try {
                const response = await fetch(showStoriesUrl);
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const storyIds = await response.json();
                console.log('Story IDs:', storyIds);

                // Fetch and display details for all story IDs
                fetchStoryDetails(storyIds);
            } catch (error) {
                console.error('Error fetching show stories:', error);
            }
        }

        async function fetchStoryDetails(ids) {
            const tbody = document.querySelector('#storiesTable tbody');
            let storyCount = 1;
            for (let id of ids) {
                try {
                    const response = await fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`);
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    const story = await response.json();
                    console.log('Story details:', story);
                    
                    const row = document.createElement('tr');
                    
                    const idCell = document.createElement('td');
                    idCell.textContent = storyCount++;
                    
                    const titleCell = document.createElement('td');
                    titleCell.textContent = story.title || 'No title available';
                    
                    const urlCell = document.createElement('td');
                    const link = document.createElement('a');
                    link.className = 'link';
                    link.href = story.url || '#';
                    link.target = '_blank'; // Ensure the link opens in a new tab
                    link.textContent = story.url || 'No URL available';
                    urlCell.appendChild(link);
                    
                    const textCell = document.createElement('td');
                    textCell.textContent = story.text || 'No text available';
                    
                    row.appendChild(idCell);
                    row.appendChild(titleCell);
                    row.appendChild(urlCell);
                    row.appendChild(textCell);
                    
                    tbody.appendChild(row);
                } catch (error) {
                    console.error('Error fetching story details:', error);
                }
            }
        }

        fetchShowStories();
    </script>

</body>
</html>
